<div class="content-body">
  <div class="container-fluid">
    <!-- Page title -->
    <div class="row page-titles">
      <ol class="breadcrumb">
        <li class="breadcrumb-item active">
          <a href="#">Reservation Management</a>
        </li>
      </ol>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div class="card shadow-sm border-0 rounded-3">
          <div class="card-body">
            <h4 class="card-title mb-4 text-center fw-semibold text-uppercase" style="color:#8f7e2a;">
              Reservation List
            </h4>

            <div class="table-responsive">
              <table class="table table-hover align-middle text-center">
                <thead class="table-light">
                  <tr>
                    <th>
                      <div class="form-check custom-checkbox">
                        <input type="checkbox" class="form-check-input" id="checkAll">
                      </div>
                    </th>
                    <th>ID</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th>Status</th>
                    <th>Total</th>
                    <th>Payment</th>
                    <th>Actions</th>
                  </tr>
                </thead>

                <tbody>
                  <tr *ngFor="let r of listReservation | paginate: { itemsPerPage: 10, currentPage: p }">
                    <td>
                      <input type="checkbox" class="form-check-input">
                    </td>

                    <td>{{ r.id }}</td>

                    <!-- Date columns -->
                    <td>
                      <span class="badge bg-light text-dark px-2 py-1">
                        {{ r.date_debut | date: 'yyyy-MM-dd' }}
                      </span>
                    </td>
                    <td>
                      <span class="badge bg-light text-dark px-2 py-1">
                        {{ r.date_fin | date: 'yyyy-MM-dd' }}
                      </span>
                    </td>

                    <!-- Status -->
                    <td>
                      <span class="badge rounded-pill text-uppercase px-3 py-2"
                        [ngClass]="{
                          'bg-warning text-dark': r.status === 'PENDING',
                          'bg-success': r.status === 'APPROVED',
                          'bg-danger': r.status === 'REFUSED'
                        }">
                        {{ r.status }}
                      </span>
                    </td>

                    <!-- Prices -->
                    <td>${{ r.addition }}</td>
                    <td>
                      <span [ngClass]="{ 'text-success fw-bold': r.payment, 'text-danger': !r.payment }">
                        {{ r.payment ? 'Paid' : 'Unpaid' }}
                      </span>
                    </td>

                    <!-- Dropdown actions -->
                    <td>
                      <div class="dropdown">
                        <button
                          class="btn btn-light border-0 shadow-sm dropdown-toggle"
                          type="button"
                          data-bs-toggle="dropdown"
                          aria-expanded="false"
                        >
                          <i class="fa fa-ellipsis-v text-secondary"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end shadow-sm">
                          <li>
                            <a class="dropdown-item text-success" (click)="upstatus(r.id, 'APPROVED')">
                              <i class="fa fa-check-circle me-2"></i>Approve
                            </a>
                          </li>
                          <li>
                            <a class="dropdown-item text-danger" (click)="upstatus(r.id, 'REFUSED')">
                              <i class="fa fa-times-circle me-2"></i>Refuse
                            </a>
                          </li>
                          <li>
                            <a class="dropdown-item text-warning" (click)="upstatus(r.id, 'PENDING')">
                              <i class="fa fa-hourglass-half me-2"></i>Set Pending
                            </a>
                          </li>
                          <li><hr class="dropdown-divider"></li>
                          <li>
                            <a class="dropdown-item text-info" type="submit">
                              <i class="fa fa-info-circle me-2"></i>Details
                            </a>
                          </li>
                          <li>
                            <a class="dropdown-item text-danger" type="submit">
                              <i class="fa fa-trash me-2"></i>Delete
                            </a>
                          </li>
                        </ul>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Pagination -->
            <div class="d-flex justify-content-center mt-3">
              <pagination-controls (pageChange)="p = $event"></pagination-controls>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
